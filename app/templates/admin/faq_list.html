{% extends 'admin/master.html' %}

{% block body %}
<div class="p-6 pb-32">
    
    {# --- ÜST BAŞLIK VE YENİ EKLEME --- #}
    <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8">
        <div>
            <h1 class="text-2xl font-bold text-white tracking-tight">SSS Yönetimi</h1>
            <p class="text-slate-400 text-xs mt-1">Sıkça sorulan soruları gruplar halinde yönetin.</p>
        </div>
        <div>
            {% if admin_view.can_create %}
            <a href="{{ url_for('.create_view') }}" class="btn btn-primary px-6 gap-2 border-none text-white shadow-lg shadow-blue-900/20">
                <i class="fa fa-plus"></i> Yeni Grup Ekle
            </a>
            {% endif %}
        </div>
    </div>

    {# --- LİSTE TABLOSU --- #}
    <div class="bg-slate-800 rounded-xl shadow-xl shadow-black/20 border border-slate-700 overflow-hidden">
        <div class="overflow-x-auto">
            <table class="table w-full text-left">
                <thead>
                    <tr class="bg-slate-900/50 border-b border-slate-700 text-slate-400 text-xs uppercase">
                        <th class="py-4 px-6 w-16">#</th>
                        <th class="py-4 px-6">Grup Adı</th>
                        <th class="py-4 px-6">Anahtar (Key)</th>
                        <th class="py-4 px-6 text-center">Soru Sayısı</th>
                        <th class="py-4 px-6 text-right">İşlemler</th>
                    </tr>
                </thead>
                <tbody class="text-slate-300 text-sm divide-y divide-slate-700">
                    {% for row in data %}
                    <tr class="hover:bg-slate-700/30 transition-colors group">
                        <td class="py-4 px-6 font-mono text-slate-500">{{ loop.index }}</td>
                        
                        <td class="py-4 px-6">
                            <div class="font-bold text-white">{{ row.name }}</div>
                        </td>

                        <td class="py-4 px-6">
                            <span class="badge badge-ghost bg-slate-900 border-slate-600 text-slate-400 font-mono text-xs">
                                {{ row.group_key }}
                            </span>
                        </td>

                        <td class="py-4 px-6 text-center">
                            <span class="badge badge-info bg-blue-900/30 text-blue-400 border-blue-800">
                                {{ row.items|length }} Soru
                            </span>
                        </td>

                        <td class="py-4 px-6 text-right space-x-2">
                            {% if admin_view.can_edit %}
                            <a href="{{ url_for('.edit_view', id=get_pk_value(row)) }}" class="btn btn-square btn-sm btn-ghost text-blue-400 hover:bg-blue-900/30" title="Düzenle">
                                <i class="fa fa-pen"></i>
                            </a>
                            {% endif %}
                            
                            {% if admin_view.can_delete %}
                            <form class="icon" method="POST" action="{{ url_for('.delete_view') }}" style="display: inline;">
                                <input type="hidden" name="id" value="{{ get_pk_value(row) }}">
                                <input type="hidden" name="url" value="{{ return_url }}">
                                <button onclick="return confirm('Bu grubu ve içindeki tüm soruları silmek istediğinize emin misiniz?');" 
                                        class="btn btn-square btn-sm btn-ghost text-red-400 hover:bg-red-900/30" title="Sil">
                                    <i class="fa fa-trash"></i>
                                </button>
                            </form>
                            {% endif %}
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="5" class="py-12 text-center text-slate-500">
                            <i class="fa fa-folder-open text-4xl mb-3 opacity-20"></i>
                            <p>Henüz hiç SSS grubu oluşturulmamış.</p>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}