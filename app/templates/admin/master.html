<!DOCTYPE html>
<html lang="tr" class="dark">
<head>
    <title>{% block title %}{{ admin_view.name or "Yönetim" }} - Ekosan{% endblock %}</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='img/favicon.png') }}" type="image/png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.7.2/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { sans: ['"Inter"', 'sans-serif'] },
                    colors: {
                        bg: '#020617',
                        surface: '#0f172a',
                        border: '#1e293b',
                        text: '#cbd5e1',
                        primary: '#3b82f6',
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #020617; color: #cbd5e1; }

        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: #475569; }

        .table-responsive { overflow-x: auto; border: 1px solid #1e293b; border-radius: 6px; background: #0f172a; }
        table.table { width: 100%; border-collapse: collapse; font-size: 0.813rem; }
        table.table thead th {
            background-color: #0f172a; color: #94a3b8; font-weight: 600;
            text-transform: uppercase; font-size: 0.7rem; padding: 0.6rem 1rem;
            border-bottom: 1px solid #1e293b; white-space: nowrap;
        }
        table.table tbody td {
            padding: 0.5rem 1rem; border-bottom: 1px solid #1e293b; color: #e2e8f0; vertical-align: middle;
        }
        table.table tr:hover td { background-color: #1e293b; }
        table.table tr:last-child td { border-bottom: none; }

        .form-control {
            display: block; width: 100%; padding: 0.45rem 0.75rem; font-size: 0.875rem;
            color: #e2e8f0; background-color: #0f172a; border: 1px solid #1e293b; border-radius: 4px; margin-bottom: 0.75rem;
        }
        .form-control:focus { border-color: #3b82f6; outline: none; box-shadow: 0 0 0 1px #3b82f6; }
        
        .select2-container--default .select2-selection--single { background-color: #0f172a !important; border: 1px solid #1e293b !important; height: 38px !important; }
        .select2-container--default .select2-selection--single .select2-selection__rendered { color: #e2e8f0 !important; line-height: 36px !important; }
        .select2-dropdown { background-color: #0f172a !important; border: 1px solid #1e293b !important; }
        .select2-container--default .select2-results__option--highlighted[aria-selected] { background-color: #3b82f6 !important; }
        .select2-container--default .select2-results__option[aria-selected=true] { background-color: #1e293b !important; }

        .btn { display: inline-flex; align-items: center; justify-content: center; padding: 0.4rem 0.9rem; font-size: 0.813rem; border-radius: 4px; gap: 0.4rem; text-decoration: none !important; }
        .pagination { display: flex; gap: 4px; margin-top: 1rem; list-style: none; padding: 0; }
        .pagination li a { padding: 4px 10px; border: 1px solid #1e293b; background: #0f172a; border-radius: 4px; color: #94a3b8; font-size: 0.75rem; text-decoration: none; }
        .pagination li.active a { background: #3b82f6; color: white; border-color: #3b82f6; }

        .row { display: flex; flex-wrap: wrap; margin: -0.5rem; }
        .col-md-12, .col-md-6, .col-md-4 { padding: 0.5rem; width: 100%; box-sizing: border-box; }
        @media(min-width: 768px) { .col-md-6 { width: 50%; } .col-md-4 { width: 33.33%; } }
        .filter-row { background: #0f172a; padding: 0.75rem; border: 1px solid #1e293b; border-radius: 4px; margin-bottom: 1rem; }

        a.icon { color: #64748b; padding: 4px; } a.icon:hover { color: #fff; }
        button[onclick*="submit"] { background: none; border: none; padding: 0; color: #64748b; }
    </style>

    {% block head_css %}{% endblock %}
    {% block head %}{% endblock %}
</head>
<body class="antialiased">

<div class="drawer lg:drawer-open">
    <input id="admin-drawer" type="checkbox" class="drawer-toggle" />
    
    <div class="drawer-content flex flex-col min-h-screen">
        
        <div class="sticky top-0 z-30 flex h-14 w-full items-center justify-between border-b border-slate-800 bg-[#020617]/80 backdrop-blur px-6">
            <div class="flex items-center gap-4">
                <label for="admin-drawer" class="btn btn-square btn-ghost btn-sm text-slate-400 lg:hidden">
                    <i class="fa fa-bars"></i>
                </label>
                <div>
                    <h1 class="text-sm font-bold text-slate-200">{{ admin_view.name }}</h1>
                </div>
            </div>

            <div class="flex items-center gap-3">
                <a href="/" target="_blank" class="btn btn-xs btn-ghost text-slate-500 hover:text-slate-300 font-normal">
                    <i class="fa fa-external-link-alt mr-1"></i> Site
                </a>
                <div class="h-4 w-[1px] bg-slate-800"></div>
                <div class="w-8 h-8 rounded-full bg-blue-900/30 border border-blue-500/20 flex items-center justify-center text-blue-400 text-xs font-bold">
                    A
                </div>
            </div>
        </div>

        <main class="flex-1 p-6 w-full max-w-[100%] mx-auto overflow-x-hidden">
            {% block page_body %}

                <div class="animate-fade-in">
                    {% block body %}{% endblock %}
                </div>

            {% endblock %}
        </main>
    </div> 
    
    <div class="drawer-side z-40 lg:h-screen lg:sticky lg:top-0 lg:overflow-hidden">
        <label for="admin-drawer" aria-label="close sidebar" class="drawer-overlay"></label> 
        
        <div class="h-full flex flex-col bg-[#0f172a] border-r border-slate-800 text-slate-400">
            
            <div class="h-14 shrink-0 flex items-center px-5 border-b border-slate-800 bg-[#0f172a]">
                <img src="{{ url_for('static', filename='img/logo.png') }}" 
                    alt="Ekosan Logo" 
                    class="h-6 w-auto object-contain mr-3">
            </div>

            <ul class="menu flex-1 overflow-y-auto px-2 py-4 gap-0.5 text-sm custom-scroll content-start">
                
                <li class="px-2.5 text-[10px] font-bold text-slate-600 uppercase tracking-wider mb-2 mt-1 pointer-events-none">
                    Yönetim
                </li>

                {% for item in admin_view.admin.menu() %}
                    {% if item.name != 'Genel Bakış' and item.name != 'Home' %}
                        
                        {% if item.is_category() %}
                            <li>
                                <details {% for child in item.get_children() %}{% if child.is_active(admin_view) %}open{% endif %}{% endfor %}>
                                    <summary class="py-2 px-2.5 rounded-md hover:bg-slate-800 hover:text-slate-100 text-slate-400">
                                        <i class="fa fa-folder w-4 text-center text-xs opacity-70"></i> 
                                        {{ item.name }}
                                    </summary>
                                    <ul class="before:bg-slate-700 border-l border-slate-700 ml-4 pl-1 my-1">
                                        {% for child in item.get_children() %}
                                            <li>
                                                <a href="{{ child.get_url() }}" class="py-1.5 pl-3 text-xs hover:bg-transparent hover:text-blue-400 hover:translate-x-1 transition-transform {% if child.is_active(admin_view) %}text-blue-400 font-medium{% endif %}">
                                                    {{ child.name }}
                                                </a>
                                            </li>
                                        {% endfor %}
                                    </ul>
                                </details>
                            </li>
                        {% else %}
                            <li>
                                <a href="{{ item.get_url() }}" class="flex items-center gap-3 py-2 px-2.5 rounded-md hover:bg-slate-800 hover:text-blue-400 transition-all {% if item.is_active(admin_view) %}bg-blue-600/10 text-blue-400 border border-blue-600/20{% endif %}">
                                    <i class="fa fa-circle w-4 text-center text-[6px] opacity-50"></i>
                                    {{ item.name }}
                                </a>
                            </li>
                        {% endif %}

                    {% endif %}
                {% endfor %}
            </ul>
            
            <div class="p-3 border-t border-slate-800 bg-[#0f172a] text-[10px] text-slate-600 text-center shrink-0">
                Ekosan | Flask-Admin
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<script>
    $(document).ready(function() {
        if($('.table td').text().trim() == 'There are no items in the table.') {
            $('.table td').html(`
                <div class="text-center py-10 text-slate-600">
                    <span class="text-sm">Veri bulunamadı.</span>
                    <a href="new/" class="ml-2 text-blue-500 hover:underline">Yeni Ekle</a>
                </div>
            `);
        }

        $('.select2').select2({ theme: "default", width: '100%' });
        $('.btn-primary').removeClass('btn-primary').addClass('bg-blue-600 hover:bg-blue-500 text-white border border-blue-500 rounded px-3 py-1.5 text-sm inline-flex items-center gap-2 transition-colors');
        $('.btn-default').addClass('bg-slate-800 border border-slate-700 text-slate-300 hover:bg-slate-700 hover:text-white rounded px-3 py-1.5 text-sm transition-colors');
        $('.btn-danger').addClass('bg-red-900/20 border border-red-900/50 text-red-400 hover:bg-red-900/40 hover:text-red-300 rounded px-2 py-1');
        
        setTimeout(function() { $('.toast, .alert').fadeOut('slow'); }, 3000);
    });
</script>

{% block tail_js %}{% endblock %}
{% block tail %}{% endblock %}

</body>
</html>